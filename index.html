<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>å¤éŸ»å°æ±ºï¼šV15 è¦–è¦ºé‡è£½ç‰ˆ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+TC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0f0f13;
            --glass-bg: rgba(30, 30, 35, 0.85);
            --glass-border: rgba(255, 255, 255, 0.15);
            --gold-primary: #d4af37;
            --gold-glow: rgba(212, 175, 55, 0.6);
            --red-primary: #c0392b;
            --red-glow: rgba(192, 57, 43, 0.6);
            --font-title: 'Ma Shan Zheng', cursive;
            --font-body: 'Noto Serif TC', serif;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden;
            background-color: var(--bg-dark);
            background-image: url("https://www.transparenttextures.com/patterns/dark-matter.png");
            font-family: var(--font-body); color: #eee;
            user-select: none; -webkit-user-select: none;
        }

        #app {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            display: flex; flex-direction: column;
            padding-bottom: env(safe-area-inset-bottom);
        }

        /* --- Header --- */
        header {
            height: 60px; flex-shrink: 0; display: flex; justify-content: space-between; align-items: center;
            padding: 0 20px; background: rgba(0,0,0,0.6); border-bottom: 1px solid #333; backdrop-filter: blur(10px); z-index: 100;
        }
        .app-title { font-family: var(--font-title); font-size: 2rem; color: var(--gold-primary); text-shadow: 0 0 10px var(--gold-glow); }

        /* --- Game Stage --- */
        #game-stage {
            flex: 1; display: flex; align-items: center; justify-content: space-between;
            padding: 20px; gap: 20px; overflow: hidden;
        }

        /* Team Panels */
        .team-panel {
            width: 220px; height: 95%; background: var(--glass-bg);
            border: 1px solid var(--glass-border); border-radius: 20px;
            display: flex; flex-direction: column; align-items: center; padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); transition: all 0.3s;
        }
        .team-panel.active {
            border-color: var(--gold-primary); box-shadow: 0 0 25px var(--gold-glow); transform: scale(1.02);
        }
        
        .avatar-frame {
            width: 80px; height: 80px; border-radius: 50%; padding: 3px; margin-bottom: 10px;
            background: linear-gradient(45deg, #444, #888);
        }
        .avatar { width: 100%; height: 100%; border-radius: 50%; background-size: cover; border: 2px solid #fff; }
        .team-name { font-family: var(--font-title); font-size: 1.8rem; margin-bottom: 5px; }
        .team-a .team-name { color: #ff6b6b; } .team-b .team-name { color: #4facfe; }

        .stats-box { width: 100%; text-align: center; margin: 10px 0; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 10px; }
        .score-display { font-size: 2.5rem; font-weight: 900; line-height: 1; color: #fff; text-shadow: 0 2px 5px #000; }
        .hearts-box { font-size: 1.2rem; margin-top: 5px; min-height: 25px; }

        .student-tag { 
            margin-top: auto; width: 100%; text-align: center; padding: 10px 0; 
            border-top: 1px solid #444; 
        }
        .student-name { font-size: 1.5rem; font-weight: bold; color: var(--gold-primary); }
        
        .manual-ctrl { display: flex; gap: 5px; justify-content: center; margin-top: 5px; opacity: 0.3; transition: opacity 0.3s; }
        .team-panel:hover .manual-ctrl { opacity: 1; }
        .mini-btn { background: #333; border: 1px solid #555; color: #ccc; width: 30px; cursor: pointer; border-radius: 4px; }

        /* --- Card Stage --- */
        #center-stage { flex: 1; height: 100%; display: flex; justify-content: center; align-items: center; perspective: 1500px; }
        .card-container {
            width: 100%; max-width: 450px; height: 100%; max-height: 600px;
            position: relative; transform-style: preserve-3d; transition: transform 0.6s;
        }
        .card-container.flipped { transform: rotateY(180deg); }
        .card-face {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            border-radius: 20px; background: #f4f1ea; border: 4px solid var(--gold-primary);
            display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        .front { background-image: url('https://www.transparenttextures.com/patterns/rice-paper.png'); }
        .back { transform: rotateY(180deg); background: #fff; padding: 25px; text-align: left; overflow-y: auto; }
        .q-img { height: 40%; background-size: cover; background-position: center; border-bottom: 2px solid #ccc; }
        .q-content { padding: 20px; flex: 1; text-align: center; overflow-y: auto; }
        .q-text { font-size: 1.4rem; font-weight: bold; color: #333; margin-top: 10px; }
        
        /* --- Mobile --- */
        @media (max-width: 900px) {
            #game-stage { flex-direction: column; padding: 10px; }
            .team-panel { width: 95%; height: 80px; flex-direction: row; justify-content: space-between; padding: 5px 15px; }
            .avatar-frame { width: 50px; height: 50px; margin: 0 10px 0 0; }
            .stats-box { background: none; padding: 0; width: auto; margin: 0; text-align: right; }
            .score-display { font-size: 1.5rem; }
            .student-tag { width: auto; border: none; padding: 0; text-align: left; min-width: 80px; }
            .student-name { font-size: 1.2rem; }
            .manual-ctrl { opacity: 1; margin-top: 0; }
            .card-container { height: 100%; }
            .q-img { height: 30%; }
        }

        /* --- Footer --- */
        footer {
            height: 70px; background: rgba(0,0,0,0.8); border-top: 1px solid #333;
            display: flex; justify-content: center; align-items: center; gap: 15px; z-index: 100;
        }
        .btn {
            padding: 10px 25px; border-radius: 30px; border: none; font-weight: bold; font-size: 1.1rem;
            cursor: pointer; transition: transform 0.1s; color: #fff;
        }
        .btn:active { transform: scale(0.95); }
        .btn-main { background: linear-gradient(45deg, #d4af37, #f1c40f); color: #000; box-shadow: 0 0 15px var(--gold-glow); }
        .btn-green { background: #27ae60; } .btn-red { background: #c0392b; }
        .btn-punish { background: linear-gradient(45deg, #800000, #c0392b); border: 2px solid #ff5555; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { box-shadow: 0 0 5px #ff0000; } 50% { box-shadow: 0 0 20px #ff0000; } }
        .hidden { display: none !important; }

        /* --- Overlays --- */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.92); z-index: 9999;
            display: none; flex-direction: column; justify-content: center; align-items: center;
            backdrop-filter: blur(8px);
        }

        /* === NEW CARD DESIGN (Magical Style) === */
        .mc-container {
            width: min(320px, 85vw); height: min(480px, 60vh);
            perspective: 1200px; cursor: pointer; margin-bottom: 20px;
        }
        .mc-inner {
            position: relative; width: 100%; height: 100%;
            text-align: center; transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55); /* Bouncy effect */
            transform-style: preserve-3d;
        }
        .mc-inner.flipped { transform: rotateY(180deg); }
        
        .mc-face {
            position: absolute; width: 100%; height: 100%;
            backface-visibility: hidden; -webkit-backface-visibility: hidden;
            border-radius: 20px; display: flex; flex-direction: column; justify-content: center; align-items: center;
            box-shadow: 0 0 50px rgba(0,0,0,0.8); border: 6px solid;
        }

        /* Chance Card Style */
        .style-chance .mc-front {
            background: radial-gradient(circle at 50% 50%, #2c2c2c, #000);
            border-color: var(--gold-primary);
            background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='2' cy='2' r='1' fill='%23d4af37' fill-opacity='0.2'/%3E%3C/svg%3E");
        }
        .style-chance .mc-back {
            background: #fffbf0; border-color: var(--gold-primary); color: #5a4a00;
            background-image: radial-gradient(circle at 50% 50%, rgba(212, 175, 55, 0.1) 0%, transparent 70%);
        }
        .style-chance .icon-glow { text-shadow: 0 0 20px var(--gold-primary); color: var(--gold-primary); }

        /* Punish Card Style */
        .style-punish .mc-front {
            background: radial-gradient(circle at 50% 50%, #2b0000, #000);
            border-color: var(--red-primary);
            background-image: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h40v40H0V0zm20 20h20v20H20V20zM0 20h20v20H0V20z' fill='%238a0000' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        .style-punish .mc-back {
            background: #fff0f0; border-color: var(--red-primary); color: #660000;
            background-image: radial-gradient(circle at 50% 50%, rgba(192, 57, 43, 0.1) 0%, transparent 70%);
        }
        .style-punish .icon-glow { text-shadow: 0 0 20px #ff0000; color: var(--red-primary); }

        /* Generic Front Elements */
        .mc-front { transform: rotateY(0deg); z-index: 2; }
        .mc-back { transform: rotateY(180deg); padding: 20px; z-index: 1; }
        
        .click-hint { animation: pulseText 1.5s infinite; margin-top: 20px; font-size: 0.9rem; opacity: 0.7; }
        @keyframes pulseText { 0%,100% { opacity: 0.5; } 50% { opacity: 1; } }

        .mc-title { font-size: 2rem; font-weight: 900; margin-bottom: 15px; font-family: var(--font-title); }
        .mc-desc { font-size: 1.2rem; line-height: 1.6; }
        .mc-val { margin-top: 20px; font-weight: bold; font-size: 1.1rem; padding: 5px 15px; border-radius: 20px; background: rgba(0,0,0,0.05); display: inline-block; }

        /* Wheel */
        .wheel-container { width: min(400px, 90vw); height: min(400px, 90vw); position: relative; margin-bottom: 20px; }
        #wheel-canvas { width: 100%; height: 100%; border-radius: 50%; border: 8px solid #d4af37; box-shadow: 0 0 50px #000; }
        .wheel-arrow { 
            position: absolute; top: -25px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0; border-left: 20px solid transparent; border-right: 20px solid transparent; border-top: 40px solid #fff; 
            filter: drop-shadow(0 4px 4px rgba(0,0,0,0.5)); z-index: 10;
        }

        /* Popups */
        .popup {
            width: min(400px, 85vw); background: #fff; color: #333;
            border-radius: 20px; padding: 30px; text-align: center;
            border: 4px solid var(--gold-primary);
            box-shadow: 0 0 60px rgba(0,0,0,0.8);
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* FX */
        .float-text { position: absolute; font-size: 2.5rem; font-weight: 900; pointer-events: none; z-index: 10000; text-shadow: 0 0 5px #000; animation: floatUp 1.5s forwards; }
        @keyframes floatUp { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-80px); } }
        .shake { animation: shake 0.5s; }
        @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-8px); } 75% { transform: translateX(8px); } }

    </style>
</head>
<body>

<div id="app">
    <header>
        <button class="btn" style="padding: 5px 15px; font-size: 0.9rem; background:#333;" onclick="toggleSettings()">âš™ï¸ è¨­å®š</button>
        <div class="app-title">å¤éŸ»å°æ±º</div>
        <div style="font-size:0.9rem; color:#aaa;">å‰©é¤˜: <span id="q-count" style="color:#fff">0</span></div>
    </header>

    <div id="game-stage">
        <div class="team-panel team-a active" id="panel-a">
            <div class="avatar-frame">
                <div class="avatar" style="background-image: url('https://images.unsplash.com/photo-1535069609567-c766ebc21562?w=200')"></div>
            </div>
            <div class="team-name">è±ªæ”¾æ´¾</div>
            <div class="stats-box">
                <div class="score-display" id="score-a">100</div>
                <div class="hearts-box" id="hearts-a">â¤ï¸â¤ï¸â¤ï¸</div>
                <div class="manual-ctrl">
                    <button class="mini-btn" onclick="modStat('a','h',1)">+â¤ï¸</button>
                    <button class="mini-btn" onclick="modStat('a','h',-1)">-â¤ï¸</button>
                    <button class="mini-btn" onclick="modStat('a','s',10)">+10</button>
                    <button class="mini-btn" onclick="modStat('a','s',-10)">-10</button>
                </div>
            </div>
            <div class="student-tag">
                <div class="student-label">æœ¬è¼ªå…ˆé‹’</div>
                <div class="student-name" id="student-name-a">---</div>
            </div>
        </div>

        <div id="center-stage">
            <div class="card-container" id="game-card" onclick="flipCard()">
                <div class="card-face front">
                    <div class="q-img" id="card-img"></div>
                    <div class="q-content">
                        <div class="q-cat" id="q-cat">æº–å‚™</div>
                        <div class="q-text" id="q-text">é»æ“Šé–‹å§‹</div>
                        <div style="margin-top:auto; font-size:0.8rem; color:#888;">(é»æ“Šç¿»é–±ç­”æ¡ˆ)</div>
                    </div>
                </div>
                <div class="card-face back">
                    <div class="ans-title">åƒè€ƒç­”æ¡ˆ</div>
                    <div class="ans-text" id="q-ans"></div>
                </div>
            </div>
        </div>

        <div class="team-panel team-b" id="panel-b">
            <div class="avatar-frame">
                <div class="avatar" style="background-image: url('https://images.unsplash.com/photo-1523293836414-9042d0c78093?w=200')"></div>
            </div>
            <div class="team-name">å©‰ç´„æ´¾</div>
            <div class="stats-box">
                <div class="score-display" id="score-b">100</div>
                <div class="hearts-box" id="hearts-b">â¤ï¸â¤ï¸â¤ï¸</div>
                <div class="manual-ctrl">
                    <button class="mini-btn" onclick="modStat('b','h',1)">+â¤ï¸</button>
                    <button class="mini-btn" onclick="modStat('b','h',-1)">-â¤ï¸</button>
                    <button class="mini-btn" onclick="modStat('b','s',10)">+10</button>
                    <button class="mini-btn" onclick="modStat('b','s',-10)">-10</button>
                </div>
            </div>
            <div class="student-tag">
                <div class="student-label">æœ¬è¼ªå…ˆé‹’</div>
                <div class="student-name" id="student-name-b">---</div>
            </div>
        </div>
    </div>

    <footer>
        <button class="btn btn-punish" onclick="showWheel()">ğŸ’€ çµ‚æ¥µæ‡²ç½°</button>
        <div style="flex:1"></div>
        <button class="btn btn-main" id="btn-draw" onclick="drawQuestion()">ğŸ”® æŠ½å–è©¦ç…‰</button>
        <div id="action-btns" class="hidden" style="display:flex; gap:15px;">
            <button class="btn btn-green" onclick="handleResult(true)">ç­”å° (+10/+â¤ï¸)</button>
            <button class="btn btn-red" onclick="handleResult(false)">ç­”éŒ¯ (-10/-ğŸ’”)</button>
        </div>
        <div style="flex:1"></div>
    </footer>
</div>

<div class="overlay" id="overlay-draw">
    <div class="mc-container" onclick="revealMysteryCard()">
        <div class="mc-inner" id="mc-inner">
            <div class="mc-face mc-front" id="mc-front">
                <div class="icon-glow" style="font-size:5rem; margin-bottom:10px;">âœ¨</div>
                <div style="font-size:2rem; font-family:var(--font-title);" id="mc-type-label">å‘½é‹</div>
                <div class="click-hint">é»æ“Šç¿»é–‹</div>
            </div>
            <div class="mc-face mc-back" id="mc-back">
                <div class="mc-title" id="mc-title">æ¨™é¡Œ</div>
                <div class="mc-desc" id="mc-desc">å…§å®¹æè¿°...</div>
                <div class="mc-val" id="mc-effect">æ•ˆæœ</div>
                <button class="btn btn-main" style="margin-top:auto; width:80%; font-size:1rem;" onclick="applyCard(event)">ç¢ºå®š</button>
            </div>
        </div>
    </div>
</div>

<div class="overlay" id="overlay-wheel">
    <h1 style="font-family:var(--font-title); color:var(--gold-primary); font-size:3rem; margin-bottom:20px;">çµ‚æ¥µæ‡²ç½°</h1>
    <div class="wheel-container">
        <div class="wheel-arrow"></div>
        <canvas id="wheel-canvas" width="500" height="500"></canvas>
    </div>
    <div style="color:#fff; font-size:1.5rem; margin:20px 0;" id="wheel-status">æº–å‚™å•Ÿå‹•...</div>
    <div style="display:flex; gap:15px;">
        <button class="btn btn-main" id="btn-spin" onclick="spinWheel()">ğŸš€ å•Ÿå‹•</button>
        <button class="btn" style="background:#333;" onclick="document.getElementById('overlay-wheel').style.display='none'">é—œé–‰</button>
    </div>
</div>

<div class="overlay" id="overlay-popup">
    <div class="popup">
        <div style="font-size:4rem; margin-bottom:10px;">ğŸ’€</div>
        <div class="mc-title" style="color:#c0392b;" id="popup-title">æ¨™é¡Œ</div>
        <div class="mc-desc" id="popup-desc">å…§å®¹</div>
        <button class="btn btn-red" style="margin-top:20px;" onclick="document.getElementById('overlay-popup').style.display='none'">æ¥å—å‘½é‹</button>
    </div>
</div>

<div class="overlay" id="overlay-settings">
    <div class="popup" style="background:#222; color:#eee; border-color:#555;">
        <h3>Excel ç®¡ç†</h3>
        <p style="font-size:0.9rem; color:#aaa; margin-bottom:20px;">å®Œæ•´æ•¸æ“šå·²å…§å»º (28é¡Œ+å®Œæ•´æ©Ÿæœƒæ‡²ç½°)</p>
        <button class="btn" onclick="exportExcel()">ğŸ“¥ ä¸‹è¼‰ Excel</button>
        <div style="margin:15px 0; border-top:1px solid #444;"></div>
        <button class="btn" style="position:relative;">
            ğŸ“¤ ä¸Šå‚³ Excel
            <input type="file" onchange="importExcel(this)" style="position:absolute; left:0; top:0; width:100%; height:100%; opacity:0; cursor:pointer;">
        </button>
        <br><br>
        <button class="btn" style="background:#444; font-size:0.9rem;" onclick="document.getElementById('overlay-settings').style.display='none'">é—œé–‰</button>
    </div>
</div>

<script>
    // --- FULL DB ---
    let db = {
        questions: [
            { cat: "è˜‡è»¾ã€Šå¿µå¥´å¬Œã€‹", q: "ã€Œå¤§æ±Ÿæ±å»ï¼Œæµªæ·˜ç›¡ã€åƒå¤é¢¨æµäººç‰©ã€ä¸€å¥ï¼Œå¥ å®šäº†å…¨è©æ€æ¨£çš„æ„Ÿæƒ…åŸºèª¿ï¼Ÿ", a: "å¥ å®šäº†ã€æ‚²æ¶¼é›„å£¯ã€‘çš„åŸºèª¿ã€‚æ„Ÿæ…¨æ™‚å…‰æµé€ï¼Œæ­·å²ä¸Šçš„è‹±é›„äººç‰©éƒ½éš¨æ™‚é–“æ¶ˆé€ï¼Œå¼•å‡ºå¾Œæ–‡å°æ­·å²èˆˆè¡°çš„æ„Ÿå˜†ã€‚", img: "https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=600" },
            { cat: "è˜‡è»¾ã€Šå¿µå¥´å¬Œã€‹", q: "è©ä¸­ã€Œäº‚çŸ³ç©¿ç©ºï¼Œé©šæ¿¤æ‹å²¸ï¼Œæ²èµ·åƒå †é›ªã€é‹ç”¨äº†å“ªäº›ä¿®è¾­æ‰‹æ³•ï¼Ÿ", a: "1. ã€èª‡å¼µã€‘ï¼ˆç©¿ç©ºã€åƒå †é›ªï¼‰<br>2. ã€æ“¬äººã€‘ï¼ˆé©šæ¿¤æ‹å²¸ï¼‰<br>3. ã€å€Ÿå–»ã€‘ï¼ˆä»¥ã€Œé›ªã€å–»æµªèŠ±ï¼‰ã€‚", img: "https://images.unsplash.com/photo-1505673542670-a5e3ff5b14a3?w=600" },
            { cat: "è˜‡è»¾ã€Šå¿µå¥´å¬Œã€‹", q: "ä½œè€…ç‚ºä½•è¦åœ¨è©ä¸­åˆ»ç•«å‘¨ç‘œã€Œé›„å§¿è‹±ç™¼ï¼Œç¾½æ‰‡ç¶¸å·¾ã€çš„å½¢è±¡ï¼Ÿ", a: "é‹ç”¨äº†ã€è¥¯æ‰˜ã€‘æ‰‹æ³•ã€‚ä»¥å‘¨ç‘œå¹´å°‘å¾—å¿—ã€ç«‹ä¸‹èµ«èµ«æˆ°åŠŸï¼Œåè¥¯è‡ªå·±å¹´è¯è€å»å»å£¯å¿—æœªé…¬ï¼ˆæ—©ç”Ÿè¯é«®ï¼‰çš„ç„¡å¥ˆã€‚", img: "https://images.unsplash.com/photo-1535069609567-c766ebc21562?w=600" },
            { cat: "è˜‡è»¾ã€Šå¿µå¥´å¬Œã€‹", q: "ã€Œå°å–¬åˆå«äº†ã€é€™ä¸€ç´°ç¯€çš„æå¯«æœ‰ä½•ä½œç”¨ï¼Ÿ", a: "ä»¥ç¾äººè¥¯æ‰˜è‹±é›„ã€‚æš—ç¤ºå‘¨ç‘œç•¶æ™‚å¹´è¼•æœ‰ç‚ºï¼Œæ„›æƒ…äº‹æ¥­å…©å¾—æ„ï¼Œæ›´é¡¯å…¶é¢¨æµç€Ÿç‘ã€‚", img: "https://images.unsplash.com/photo-1523099981602-5c5a4b105d7b?w=600" },
            { cat: "è˜‡è»¾ã€Šå¿µå¥´å¬Œã€‹", q: "ã€Œæ±Ÿå±±å¦‚ç•«ï¼Œä¸€æ™‚å¤šå°‘è±ªå‚‘ã€åœ¨çµæ§‹ä¸Šæœ‰ä½•ä½œç”¨ï¼Ÿ", a: "å…·æœ‰ã€æ‰¿ä¸Šå•Ÿä¸‹ã€‘çš„ä½œç”¨ã€‚ã€Œæ±Ÿå±±å¦‚ç•«ã€ç¸½çµä¸Šç‰‡å¯«æ™¯ï¼Œã€Œä¸€æ™‚å¤šå°‘è±ªå‚‘ã€é–‹å•Ÿä¸‹ç‰‡æ‡·å¤ã€‚", img: "https://images.unsplash.com/photo-1508614999368-9260051292e5?w=600" },
            { cat: "è˜‡è»¾ã€Šå¿µå¥´å¬Œã€‹", q: "ã€Œäººç”Ÿå¦‚å¤¢ï¼Œä¸€å°Šé‚„é…¹æ±Ÿæœˆã€åæ˜ äº†è˜‡è»¾æ€æ¨£çš„äººç”Ÿæ…‹åº¦ï¼Ÿ", a: "åæ˜ äº†è˜‡è»¾ã€æ› é”ã€‘ï¼ˆæˆ–æ¶ˆæ¥µä¸­è¦‹æ› é”ï¼‰çš„æ…‹åº¦ã€‚æ—¢ç„¶äººç”ŸçŸ­æš«å¦‚å¤¢ï¼Œä¸å¦‚å°‡è‹¦æ‚¶å¯„è¨—æ–¼æ°¸æ†çš„æ±Ÿæœˆï¼Œè‡ªæˆ‘é–‹è§£ã€‚", img: "https://images.unsplash.com/photo-1532767153582-b1a0e5145009?w=600" },
            { cat: "è˜‡è»¾ã€Šå¿µå¥´å¬Œã€‹", q: "è©ä¸­é‹ç”¨äº†ã€Œè™›å¯¦çµåˆã€ï¼Œè«‹èˆ‰å‡ºã€Œè™›å¯«ã€çš„éƒ¨åˆ†ï¼Ÿ", a: "ä¸‹ç‰‡æå¯«ã€å‘¨ç‘œåœ¨èµ¤å£ä¹‹æˆ°è«‡ç¬‘ç”¨å…µã€‘çš„æƒ…æ™¯ï¼ˆè«‡ç¬‘é–“ã€æª£æ«“ç°é£›ç…™æ»…ï¼‰æ˜¯è™›å¯«ï¼ˆæƒ³åƒï¼‰ï¼Œå› ä½œè€…ç•¶æ™‚ä¸¦ä¸åœ¨å ´ã€‚", img: "https://images.unsplash.com/photo-1599839575945-a9e5af0c3fa5?w=600" },
            { cat: "ææ¸…ç…§ã€Šè²è²æ…¢ã€‹", q: "é–‹é¦–ã€Œå°‹å°‹è¦“è¦“ï¼Œå†·å†·æ¸…æ¸…ï¼Œæ·’æ·’æ…˜æ…˜æˆšæˆšã€åå››å­—ç–Šè©ï¼Œæœ‰ä½•è—è¡“æ•ˆæœï¼Ÿ", a: "1. ç‡Ÿé€ ã€æ„è‹¦ã€‘æ°›åœï¼Œç”±å¤–åœ¨ç’°å¢ƒå¯«åˆ°å…§å¿ƒæ‚²ç—›ã€‚<br>2. å¢å¼·éŸ³éŸ»ç¾ï¼Œè®€ä¾†æœ‰ã€å¾˜å¾Šç©ºè™›ã€‘ä¹‹æ„Ÿã€‚", img: "https://images.unsplash.com/photo-1498354136143-e8d720f2b9b6?w=600" },
            { cat: "ææ¸…ç…§ã€Šè²è²æ…¢ã€‹", q: "ã€Œä¸‰æ¯å…©ç›æ·¡é…’ï¼Œæ€æ•µä»–ã€æ™šä¾†é¢¨æ€¥ã€ä¸­çš„ã€Œæ·¡é…’ã€èˆ‡ã€Œé¢¨æ€¥ã€æ·±æ„ç‚ºä½•ï¼Ÿ", a: "ã€æ·¡é…’ã€‘ï¼šéé…’æ·¡ï¼Œè€Œæ˜¯æ„æƒ…å¤ªé‡ï¼Œé…’åŠ›ç„¡æ³•åŒ–è§£ã€‚<br>ã€é¢¨æ€¥ã€‘ï¼šæ—¢æŒ‡ç§‹é¢¨ï¼Œäº¦è±¡å¾µåœ‹ç ´å®¶äº¡çš„æ”¿æ²»å±€å‹¢åŠå€‹äººé£„æ³Šã€‚", img: "https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?w=600" },
            { cat: "ææ¸…ç…§ã€Šè²è²æ…¢ã€‹", q: "è©ä¸­æåˆ°ã€Œé›éä¹Ÿï¼Œæ­£å‚·å¿ƒï¼Œå»æ˜¯èˆŠæ™‚ç›¸è­˜ã€ï¼Œç‚ºä½•å¤§é›æœƒè®“ä½œè€…å‚·å¿ƒï¼Ÿ", a: "å› ç‚ºå¤§é›æ˜¯å¾åŒ—æ–¹å—é£›ï¼Œè®“ä½œè€…è¯æƒ³åˆ°ã€æ•…é„‰ã€‘ï¼ˆåŒ—æ–¹æ·ªé™·å€ï¼‰å’Œã€äº¡å¤«ã€‘ï¼Œå¼•ç™¼é„‰æ„èˆ‡æ‚¼äº¡ä¹‹ç—›ã€‚", img: "https://images.unsplash.com/photo-1483323324317-578dbd252443?w=600" },
            { cat: "ææ¸…ç…§ã€Šè²è²æ…¢ã€‹", q: "ã€Œæ»¿åœ°é»ƒèŠ±å †ç©ï¼Œæ†”æ‚´æï¼Œå¦‚ä»Šæœ‰èª°å ªæ‘˜ã€é‹ç”¨äº†ç”šéº¼ä¿®è¾­ï¼Ÿæ¯”å–»ç”šéº¼ï¼Ÿ", a: "é‹ç”¨äº†ã€é›™é—œã€‘æˆ–ã€å€Ÿå–»ã€‘ã€‚ä»¥èŠ±çš„æ¯èå‡‹é›¶ï¼Œæ¯”å–»ä½œè€…è‡ªå·±ã€å®¹é¡æ†”æ‚´ã€‘åŠèº«ä¸–é£„é›¶ã€‚", img: "https://images.unsplash.com/photo-1469395269791-2856149463c2?w=600" },
            { cat: "ææ¸…ç…§ã€Šè²è²æ…¢ã€‹", q: "ã€Œå®ˆè‘—çª—å…’ï¼Œç¨è‡ªæ€ç”Ÿå¾—é»‘ã€è¡¨é”äº†ä½œè€…æ€æ¨£çš„æ„Ÿå—ï¼Ÿ", a: "è¡¨é”äº†ã€åº¦æ—¥å¦‚å¹´ã€‘çš„å­¤ç¨æ„Ÿã€‚å­¤èº«ä¸€äººï¼Œæ™‚é–“éå¾—æ¥µæ…¢ï¼Œé›£ä»¥ç†¬åˆ°å¤©é»‘ã€‚", img: "https://images.unsplash.com/photo-1510279768565-5389f4dc7944?w=600" },
            { cat: "ææ¸…ç…§ã€Šè²è²æ…¢ã€‹", q: "ã€Œæ¢§æ¡æ›´å…¼ç´°é›¨ï¼Œåˆ°é»ƒæ˜ã€é»é»æ»´æ»´ã€ç‡Ÿé€ äº†æ€æ¨£çš„æ„å¢ƒï¼Ÿ", a: "ç‡Ÿé€ äº†æ·’æ¶¼ã€é€£ç¶¿ä¸çµ•çš„æ„è‹¦æ„å¢ƒã€‚é›¨æ‰“æ¢§æ¡æ˜¯ä¸­åœ‹å¤å…¸è©©è©ä¸­å…¸å‹çš„ã€æ–·è…¸ã€‘æ„è±¡ã€‚", img: "https://images.unsplash.com/photo-1515694346937-94d85e41e6f0?w=600" },
            { cat: "ææ¸…ç…§ã€Šè²è²æ…¢ã€‹", q: "å…¨è©çµå°¾ã€Œé€™æ¬¡ç¬¬ï¼Œæ€ä¸€å€‹æ„å­—äº†å¾—ã€åœ¨ä½ˆå±€ä¸Šæœ‰ä½•ç‰¹è‰²ï¼Ÿ", a: "ã€å’ç« é¡¯å¿—ã€‘ã€‚ç¸½çµå…¨è©ï¼Œèªªæ˜é€™ç¨®äº¡åœ‹ä¹‹æ¨ã€å–ªå¤«ä¹‹ç—›ã€æµé›¢ä¹‹è‹¦äº¤ç¹”ï¼Œå·²è¶…è¶Šäº†ä¸€èˆ¬æ„ç¾©ä¸Šçš„ã€Œæ„ã€ã€‚", img: "https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?w=600" },
            { cat: "è¾›æ£„ç–¾ã€Šé’ç‰æ¡ˆã€‹", q: "ã€Œæ±é¢¨å¤œæ”¾èŠ±åƒæ¨¹ï¼Œæ›´å¹è½ã€æ˜Ÿå¦‚é›¨ã€æå¯«çš„æ˜¯ç”šéº¼æ™¯è±¡ï¼Ÿ", a: "æå¯«å…ƒå®µç¯€ã€ç…™ç«ç’€ç’¨ã€‘ï¼ˆæˆ–èŠ±ç‡ˆç¹å¤šï¼‰çš„ç†±é¬§æ™¯è±¡ã€‚é€™è£¡é‹ç”¨äº†æ¯”å–»ï¼Œå°‡ç…™ç«/ç‡ˆç«æ¯”ä½œèŠ±æ¨¹å’Œæµæ˜Ÿé›¨ã€‚", img: "https://images.unsplash.com/photo-1463973644917-087034176466?w=600" },
            { cat: "è¾›æ£„ç–¾ã€Šé’ç‰æ¡ˆã€‹", q: "ã€Œå¯¶é¦¬é›•è»Šé¦™æ»¿è·¯ã€ä¸€å¥å¾ç”šéº¼è§’åº¦æå¯«å…ƒå®µç››æ³ï¼Ÿ", a: "å¾ã€å—…è¦ºã€‘ï¼ˆé¦™æ»¿è·¯ï¼‰å’Œè¦–è¦ºï¼ˆå¯¶é¦¬é›•è»Šï¼‰æå¯«ã€‚å´é¢åæ˜ å‡ºéŠäººçš„å¯Œè²´èˆ‡éŠå®¢ä¹‹å¤šã€‚", img: "https://images.unsplash.com/photo-1558280417-ea782fba9025?w=600" },
            { cat: "è¾›æ£„ç–¾ã€Šé’ç‰æ¡ˆã€‹", q: "è©ä¸­æå¯«ã€Œè›¾å…’ã€é›ªæŸ³ã€é»ƒé‡‘ç¸·ï¼Œç¬‘èªç›ˆç›ˆæš—é¦™å»ã€çš„ä»•å¥³åœ–ï¼Œç›®çš„æ˜¯ç”šéº¼ï¼Ÿ", a: "ç›®çš„æ˜¯ä½œç‚ºã€åè¥¯ã€‘ã€‚ä»¥ç››è£æ‰“æ‰®ã€æˆç¾¤çµéšŠçš„åº¸ä¿—éŠäººï¼Œåè¥¯å¾Œæ–‡ã€Œé‚£äººã€çš„å­¤é«˜èˆ‡è„«ä¿—ã€‚", img: "https://images.unsplash.com/photo-1531126362484-954933979858?w=600" },
            { cat: "è¾›æ£„ç–¾ã€Šé’ç‰æ¡ˆã€‹", q: "ã€Œçœ¾é‡Œå°‹ä»–åƒç™¾åº¦ã€ä¸­çš„ã€Œä»–ã€è±¡å¾µç”šéº¼ï¼Ÿ", a: "è±¡å¾µã€ä½œè€…è‡ªå·±ã€‘ï¼ˆæˆ–ç†æƒ³äººæ ¼ï¼‰ã€‚ä»£è¡¨ä¸é¡˜éš¨æ³¢é€æµã€ä¸åŒæµåˆæ±¡çš„é«˜å°šæƒ…æ“ã€‚", img: "https://images.unsplash.com/photo-1510674485131-dc88d96369b4?w=600" },
            { cat: "è¾›æ£„ç–¾ã€Šé’ç‰æ¡ˆã€‹", q: "ã€Œé©€ç„¶å›é¦–ï¼Œé‚£äººå»åœ¨ï¼Œç‡ˆç«é—ŒçŠè™•ã€ä¸­ï¼Œã€Œç‡ˆç«é—ŒçŠã€æ˜¯æŒ‡ç”šéº¼åœ°æ–¹ï¼Ÿ", a: "æŒ‡ã€ç‡ˆç«ç¨€ç–ã€å†·æ¸…ã€‘çš„åœ°æ–¹ã€‚èˆ‡å‰æ–‡ç†±é¬§ç¹è¯çš„è¡—æ™¯å½¢æˆå¼·çƒˆå°æ¯”ã€‚", img: "https://images.unsplash.com/photo-1506543730-1c499ee898e3?w=600" },
            { cat: "è¾›æ£„ç–¾ã€Šé’ç‰æ¡ˆã€‹", q: "é€™é¦–è©è¡¨é¢å¯«å…ƒå®µæ„›æƒ…ï¼Œå¯¦éš›éš±å«äº†ç”šéº¼æ”¿æ²»å¯„è¨—ï¼Ÿ", a: "è¡¨é”äº†ä½œè€…å°å—å®‹æœå»·è‹Ÿä¸”å·å®‰çš„ä¸æ»¿ï¼Œä»¥åŠè‡ªå·±ã€å­¤èŠ³è‡ªè³ã€ä¸é¡˜å‘ä¸–ä¿—ï¼ˆæŠ•é™æ´¾ï¼‰ç»åªšã€‘çš„æ”¿æ²»ç«‹å ´ã€‚", img: "https://images.unsplash.com/photo-1565551984242-b911c4702cf1?w=600" },
            { cat: "è¾›æ£„ç–¾ã€Šé’ç‰æ¡ˆã€‹", q: "æœ¬è©ä¸»è¦é‹ç”¨äº†ç”šéº¼å¯«ä½œæ‰‹æ³•ä¾†çªå‡ºä¸»é¡Œï¼Ÿ", a: "ã€åè¥¯ã€‘ï¼ˆæˆ–å°æ¯”ï¼‰ã€‚ä»¥ä¸Šç‰‡çš„ç¹è¯ç†±é¬§ï¼ˆèŠ±åƒæ¨¹ã€å¯¶é¦¬ã€ç¬‘èªç›ˆç›ˆï¼‰ï¼Œåè¥¯ä¸‹ç‰‡ã€Œç‡ˆç«é—ŒçŠè™•ã€çš„å­¤ç¨æ¸…å†·ã€‚", img: "https://images.unsplash.com/photo-1493413344196-8575a74e8494?w=600" },
            { cat: "æŸ³å®—å…ƒã€Šå§‹å¾—è¥¿å±±ã€‹", q: "é¡Œç›®ç‚ºã€Œå§‹å¾—è¥¿å±±å®´éŠè¨˜ã€ï¼Œç•¶ä¸­çš„ã€Œå§‹ã€å­—æœ‰ä½•æ·±æ„ï¼Ÿ", a: "ã€Œå§‹ã€æ„å‘³è‘—ã€çœŸæ­£éŠè¦½çš„é–‹å§‹ã€‘ã€‚ä½œè€…èªç‚ºä»¥å‰çš„éŠè¦½éƒ½ä¸ç®—æ•¸ï¼Œç›´åˆ°ç™¼ç¾è¥¿å±±ç¨ç‰¹çš„æ°£è³ªï¼Œæ‰èˆ‡è‡ªå·±çš„å¿ƒéˆç”¢ç”Ÿå…±é³´ã€‚", img: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=600" },
            { cat: "æŸ³å®—å…ƒã€Šå§‹å¾—è¥¿å±±ã€‹", q: "æ–‡ç« ç¬¬ä¸€æ®µä½œè€…èªªã€Œä»¥ç‚ºå‡¡æ˜¯å·ä¹‹å±±æ°´æœ‰ç•°æ…‹è€…ï¼Œçš†æˆ‘æœ‰ä¹Ÿã€ï¼Œé€™åæ˜ äº†ä»–ç•¶æ™‚æ€æ¨£çš„å¿ƒæ…‹ï¼Ÿ", a: "åæ˜ äº†ä»–ã€è‡ªä»¥ç‚ºæ˜¯ã€‘ï¼ˆæˆ–æ¼«ä¸ç¶“å¿ƒï¼‰çš„å¿ƒæ…‹ã€‚ä»–ä»¥ç‚ºè‡ªå·±å·²ç¶“çœ‹éäº†æ°¸å·ç¾æ™¯ï¼Œç‚ºå¾Œæ–‡ç™¼ç¾è¥¿å±±çš„é©šå–œä½œé‹ªå¢Šï¼ˆæ¬²æšå…ˆæŠ‘ï¼‰ã€‚", img: "https://images.unsplash.com/photo-1500375592092-40eb2168fd21?w=600" },
            { cat: "æŸ³å®—å…ƒã€Šå§‹å¾—è¥¿å±±ã€‹", q: "ä½œè€…æå¯«ç™»ä¸Šè¥¿å±±æ‰€è¦‹ï¼šã€Œå°ºå¯¸åƒé‡Œã€ã€ã€Œæ”¢è¹™ç´¯ç©ï¼Œè«å¾—é¯éš±ã€ï¼Œé€™æ˜¯ç”šéº¼æå¯«æ‰‹æ³•ï¼Ÿ", a: "é‹ç”¨äº†ã€èª‡å¼µã€‘å’Œã€è¦–è¦ºå£“ç¸®ã€‘ã€‚èªªæ˜è¥¿å±±åœ°å‹¢æ¥µé«˜ï¼Œå‘¨åœå»£é—Šçš„æ™¯ç‰©åœ¨çœ¼ä¸­éƒ½ç¸®å°äº†ï¼Œç›¡æ”¶çœ¼åº•ã€‚", img: "https://images.unsplash.com/photo-1454496522488-7a8e488e8606?w=600" },
            { cat: "æŸ³å®—å…ƒã€Šå§‹å¾—è¥¿å±±ã€‹", q: "æ–‡ä¸­ç”¨ã€Œç¸ˆé’ç¹šç™½ï¼Œå¤–èˆ‡å¤©éš›ã€ä¾†å½¢å®¹ç”šéº¼ï¼Ÿ", a: "å½¢å®¹è¥¿å±±å››å‘¨çš„ç’°å¢ƒã€‚æŒ‡é’å±±ç™½æ°´ï¼ˆæˆ–é›²æ°£ï¼‰äº’ç›¸çºç¹ï¼Œä¸€ç›´å»¶ä¼¸åˆ°å¤©é‚Šï¼Œèˆ‡å¤©ç©ºäº¤æ¥ã€‚", img: "https://images.unsplash.com/photo-1470770841072-f978cf4d019e?w=600" },
            { cat: "æŸ³å®—å…ƒã€Šå§‹å¾—è¥¿å±±ã€‹", q: "ã€Œå¿ƒå‡å½¢é‡‹ï¼Œèˆ‡è¬åŒ–å†¥åˆã€è¡¨é”äº†ä½œè€…æ€æ¨£çš„æ„Ÿå—ï¼Ÿ", a: "è¡¨é”äº†ã€å¤©äººåˆä¸€ã€‘ï¼ˆæˆ–ç²¾ç¥è§£è„«ï¼‰çš„å¢ƒç•Œã€‚ç²¾ç¥å‡èšï¼Œå½¢é«”å½·å½¿æ¶ˆæ•£ï¼Œå¿˜å»äº†è¢«è²¶çš„æ¦®è¾±ï¼Œèˆ‡å¤§è‡ªç„¶èç‚ºä¸€é«”ã€‚", img: "https://images.unsplash.com/photo-1518020382113-a7e8fc38eac9?w=600" },
            { cat: "æŸ³å®—å…ƒã€Šå§‹å¾—è¥¿å±±ã€‹", q: "ä½œè€…ä»¥ã€Œä¸èˆ‡åŸ¹å¡¿ç‚ºé¡ã€ä¾†æå¯«è¥¿å±±ï¼Œé€™æœ‰ç”šéº¼è±¡å¾µæ„ç¾©ï¼Ÿ", a: "è±¡å¾µä½œè€…ã€å­¤é«˜å‚²ä¸–ã€‘çš„å“æ ¼ã€‚è¥¿å±±ä¸èˆ‡å°åœŸä¸˜ï¼ˆåŸ¹å¡¿ï¼‰ç‚ºä¼ï¼Œæ­£å¦‚ä½œè€…ä¸é¡˜èˆ‡ä¸–ä¿—å°äººåŒæµåˆæ±¡ã€‚", img: "https://images.unsplash.com/photo-1544985220-54eecc472915?w=600" },
            { cat: "æŸ³å®—å…ƒã€Šå§‹å¾—è¥¿å±±ã€‹", q: "æ–‡ä¸­æåˆ°ã€Œæ´‹æ´‹ä¹èˆ‡é€ ç‰©è€…éŠï¼Œè€Œä¸çŸ¥å…¶æ‰€çª®ã€ï¼Œæ­¤å¥å—åˆ°å“ªå®¶æ€æƒ³å½±éŸ¿ï¼Ÿ", a: "å—åˆ°ã€é“å®¶ã€‘ï¼ˆèŠå­ï¼‰æ€æƒ³å½±éŸ¿ã€‚æŒ‡é †æ‡‰è‡ªç„¶ï¼Œç„¡æ‹˜ç„¡æŸåœ°èˆ‡å¤©åœ°åŒéŠã€‚", img: "https://images.unsplash.com/photo-1501785888041-af3ef285b470?w=600" }
        ],
        ops: [
            { title: "ç¾½æ‰‡ç¶¸å·¾", desc: "ã€è«‡ç¬‘é–“ã€‘æŒ‡å®šæ•µæ–¹ä¸€åã€Œä¸»å°‡ã€ç¦è¨€ä¸€å›åˆã€‚", val: 0 },
            { title: "å¤§æ±Ÿæ±å»", desc: "æ°£å‹¢å¦‚è™¹ï¼ç›´æ¥æ‰£é™¤æ•µæ–¹ 20 åˆ†ã€‚", val: 20 },
            { title: "é©€ç„¶å›é¦–", desc: "çµ•è™•é€¢ç”Ÿã€‚è‹¥ç­”éŒ¯é¡Œç›®ï¼Œå¯æ“æœ‰ä¸€æ¬¡ã€Œå›é¦–ã€æ©Ÿæœƒã€‚", val: 0 },
            { title: "å¿ƒå‡å½¢é‡‹", desc: "èˆ‡è¬åŒ–å†¥åˆï¼Œé€²å…¥ç„¡æ•µç‹€æ…‹ï¼ŒæŠµéŠ·ä¸‹æ¬¡æ‡²ç½°ã€‚", val: 0 },
            { title: "é›éä¹Ÿ", desc: "ã€å»æ˜¯èˆŠæ™‚ç›¸è­˜ã€‘ã€‚å¯å‘å ´å¤–æ±‚æ•‘ä¸€æ¬¡ã€‚", val: 0 },
            { title: "æ±é¢¨å¤œæ”¾", desc: "èŠ±åƒæ¨¹ï¼Œæ˜Ÿå¦‚é›¨ã€‚å¹¸é‹å¤§çˆ†ç™¼ï¼Œæœ¬é¡Œå¾—åˆ†é›™å€ (åŠ 20åˆ†)ã€‚", val: 20 },
            { title: "å¼•è§´æ»¿é…Œ", desc: "å› ç‚ºå–é†‰äº†ç„¡æ‰€ç•æ‡¼ï¼Œç›´æ¥è·³éæœ¬é¡Œè¦–ç‚ºç­”å°ã€‚", val: 0 },
            { title: "äº‚çŸ³ç©¿ç©º", desc: "é©šæ¿¤æ‹å²¸ã€‚éš¨æ©ŸæŒ‡å®šæ•µæ–¹å…©åéšŠå“¡æš«åœä¸€å›åˆã€‚", val: 0 }
        ],
        puns: [
            { title: "æ—©ç”Ÿè¯é«®", desc: "å¤šæƒ…æ‡‰ç¬‘æˆ‘ã€‚å…¨éšŠè¢«å˜²ç¬‘ï¼Œå£«æ°£å—æï¼Œæ‰£ 10 åˆ†ã€‚", val: 10 },
            { title: "å€Ÿé…’æ¾†æ„", desc: "é ­æ˜è…¦è„¹ï¼Œä¸‹å›åˆç­”é¡Œæ™‚é–“æ¸›åŠã€‚", val: 0 },
            { title: "æ˜æ˜æ¬²ç¡", desc: "éšŠä¼é€²å…¥å¤¢éŠç‹€æ…‹ï¼Œæš«åœä¸€å›åˆã€‚", val: 0 },
            { title: "é»é»æ»´æ»´", desc: "æ¢§æ¡æ›´å…¼ç´°é›¨ã€‚é€™å›åˆè‹¥ç­”éŒ¯ï¼Œé€£çºŒæ‰£åˆ†å…©æ¬¡ã€‚", val: 0 },
            { title: "ç‡ˆç«é—ŒçŠ", desc: "çœ¾é‡Œå°‹ä»–åƒç™¾åº¦ã€‚ä¸‹å›åˆéšŠé•·å¿…é ˆã€Œå­¤ç¨ä½œç­”ã€ã€‚", val: 0 },
            { title: "æª£æ«“ç°é£›", desc: "é˜²ç·šå´©æ½°ï¼Œéš¨æ©Ÿç§»é™¤ä¸€å¼µæ©Ÿæœƒå¡ï¼Œä¸¦æ‰£é™¤ 1 é¡†å¿ƒã€‚", val: 0 },
            { title: "æ”¢è¹™ç´¯ç©", desc: "å£“åŠ›åƒå±±ä¸€æ¨£ï¼Œå…¨éšŠå¿…é ˆã€Œæ“ åœ¨ä¸€èµ·ã€ä½œç­”ã€‚", val: 0 },
            { title: "æ†”æ‚´æ", desc: "äººæ¯”é»ƒèŠ±ç˜¦ã€‚å…¨éšŠé«”åŠ›ä¸æ”¯ï¼Œä¸‹å›åˆè¶´åœ¨æ¡Œä¸Šä½œç­”ã€‚", val: 0 }
        ],
        wheel: [
            "ã€å°‹å°‹è¦“è¦“ã€‘çŸ‡çœ¼æ‘¸äºº (10ç§’)",
            "ã€é©šæ¿¤æ‹å²¸ã€‘äººé«”æµ·æµª+é…éŸ³",
            "ã€ç®•è¸è€Œé¨ã€‘æ¨¡ä»¿æŸ³å®—å…ƒåå§¿",
            "ã€ç¬‘èªç›ˆç›ˆã€‘å§¨æ¯ç¬‘å®šæ ¼30ç§’",
            "ã€ä¸€å°Šé‚„é…¹æ±Ÿæœˆã€‘å°æ°´æ¨½æ·±æƒ…æœ—èª¦",
            "ã€å¯¶é¦¬é›•è»Šã€‘äººé«”è½å­ç¹å ´ä¸€å‘¨",
            "ã€æ€ä¸€å€‹æ„å­—äº†å¾—ã€‘é€£ç’°å˜†æ°£",
            "ã€æœ›è¥¿å±±ã€‘å¤§å–Šç™¼ç¾æ–°å¤§é™¸",
            "ã€é›„å§¿è‹±ç™¼ã€‘Chokæ¨£å®šæ ¼",
            "ã€æ·’æ·’æ…˜æ…˜æˆšæˆšã€‘å“­è…” Rap"
        ],
        roster: {
            a: ["æç™½", "æœç”«", "ç‹ç¶­", "å­Ÿæµ©ç„¶", "ç‹æ˜Œé½¡"],
            b: ["è˜‡è»¾", "æ­é™½ä¿®", "ç‹å®‰çŸ³", "æ›¾é", "é™¸æ¸¸"]
        }
    };

    let state = { hearts: {a:3, b:3}, scores: {a:100, b:100}, turn: 'a', curQ: null, pending: null };
    let wheelDeg = 0; // Cumulative rotation

    function init() { updateUI(); initWheel(); }

    function updateUI() {
        document.getElementById('q-count').innerText = db.questions.length;
        const t = state.turn;
        const a = document.getElementById('panel-a'), b = document.getElementById('panel-b');
        if (t === 'a') { a.classList.add('active'); b.classList.remove('active'); }
        else { b.classList.add('active'); a.classList.remove('active'); }
        
        ['a','b'].forEach(team => {
            document.getElementById(`score-${team}`).innerText = state.scores[team];
            let h = "";
            for(let i=0; i<state.hearts[team]; i++) h += "â¤ï¸";
            if(state.hearts[team]<=0) h = "ğŸ’”";
            document.getElementById(`hearts-${team}`).innerText = h;
        });
    }

    function modStat(team, type, val) {
        if (type === 'h') {
            state.hearts[team] = Math.max(0, state.hearts[team] + val);
            showFloat(team, (val>0?"+":"") + val + "â¤ï¸", val>0?"#2ecc71":"#ff4444");
        } else {
            state.scores[team] += val;
            showFloat(team, (val>0?"+":"") + val + "åˆ†", val>0?"#2ecc71":"#ff4444");
        }
        updateUI();
    }

    function drawQuestion() {
        if (db.questions.length === 0) return alert("é¡Œåº«å·²ç©ºï¼");
        const idx = Math.floor(Math.random() * db.questions.length);
        state.curQ = db.questions[idx];
        db.questions.splice(idx, 1);

        const r = db.roster[state.turn];
        const s = (r && r.length) ? r[Math.floor(Math.random() * r.length)] : "å…¨é«”";
        document.getElementById(`student-name-${state.turn}`).innerText = s;
        document.getElementById(`student-name-${state.turn==='a'?'b':'a'}`).innerText = "---";

        document.getElementById('game-card').classList.remove('flipped');
        document.getElementById('q-cat').innerText = state.curQ.cat;
        document.getElementById('q-text').innerText = state.curQ.q;
        document.getElementById('q-ans').innerHTML = state.curQ.a;
        const img = document.getElementById('card-img');
        if(state.curQ.img && state.curQ.img.startsWith('http')) {
            img.style.backgroundImage = `url('${state.curQ.img}')`; img.style.display = 'block';
        } else img.style.display = 'none';

        document.getElementById('btn-draw').classList.add('hidden');
        document.getElementById('action-btns').classList.remove('hidden');
        updateUI();
    }

    function flipCard() { document.getElementById('game-card').classList.toggle('flipped'); }

    function handleResult(isCorrect) {
        const t = state.turn;
        if (isCorrect) { modStat(t,'s',10); modStat(t,'h',1); }
        else { modStat(t,'s',-10); modStat(t,'h',-1); }

        let pool = isCorrect ? db.ops : db.puns;
        if(!pool.length) pool = [{title:"ç„¡", desc:"...", val:0}];
        const item = pool[Math.floor(Math.random() * pool.length)];
        state.pending = { item, isCorrect };

        document.getElementById('mc-inner').classList.remove('flipped');
        const container = document.getElementById('overlay-draw');
        const inner = document.getElementById('mc-inner');
        
        // Apply Theme Style
        container.className = isCorrect ? "overlay style-chance" : "overlay style-punish";
        
        const typeLabel = document.getElementById('mc-type-label');
        typeLabel.innerText = isCorrect ? "âœ¨ å‘½é‹ä¹‹è¼ª âœ¨" : "âš¡ å„é‹é™è‡¨ âš¡";

        document.getElementById('mc-title').innerText = item.title;
        document.getElementById('mc-desc').innerText = item.desc;
        
        let eff = "";
        if (item.val > 0) eff += `åˆ†æ•¸: ${isCorrect?'+':'-'}${item.val} `;
        if (item.desc.includes("å¿ƒ") || item.desc.includes("å‘½")) eff += ` (æ¶‰åŠç”Ÿå‘½)`;
        document.getElementById('mc-effect').innerText = eff;

        container.style.display = 'flex';
    }

    function revealMysteryCard() {
        document.getElementById('mc-inner').classList.add('flipped');
    }

    function applyCard(e) {
        e.stopPropagation();
        document.getElementById('overlay-draw').style.display = 'none';
        
        const { item, isCorrect } = state.pending;
        const cur = state.turn;
        const opp = cur === 'a' ? 'b' : 'a';

        if (item.val > 0) {
            if (isCorrect) {
                if (item.desc.includes("æ•µ") || item.desc.includes("æ‰£é™¤")) modStat(opp, 's', -item.val);
                else modStat(cur, 's', item.val);
            } else {
                modStat(cur, 's', -item.val);
            }
        }
        if (item.desc.includes("å¿ƒ")) {
            if (isCorrect) {
                if (item.desc.includes("æ•µ")) modStat(opp, 'h', -1);
                else modStat(cur, 'h', 1);
            } else {
                modStat(cur, 'h', -1);
            }
        }

        state.turn = opp;
        document.getElementById('btn-draw').classList.remove('hidden');
        document.getElementById('action-btns').classList.add('hidden');
        document.getElementById('game-card').classList.remove('flipped');
        updateUI();
    }

    function showFloat(team, txt, col) {
        const panel = document.getElementById(`panel-${team}`);
        const rect = panel.getBoundingClientRect();
        const el = document.createElement('div');
        el.className = 'float-text';
        el.innerText = txt; el.style.color = col;
        el.style.left = (rect.left + rect.width/2 - 30) + 'px';
        el.style.top = (rect.top + 50) + 'px';
        document.body.appendChild(el);
        setTimeout(() => el.remove(), 1500);
        if(col.includes("ff")) {
            panel.classList.remove('shake'); void panel.offsetWidth; panel.classList.add('shake');
        }
    }

    // --- Wheel (Cumulative Rotation Fix) ---
    function showWheel() { 
        document.getElementById('overlay-wheel').style.display='flex'; 
        initWheel(); 
        document.getElementById('wheel-msg').innerText = "æº–å‚™å•Ÿå‹•...";
        document.getElementById('btn-spin').disabled = false;
        document.getElementById('btn-close-wheel').classList.add('hidden');
    }
    
    function initWheel() {
        const cvs = document.getElementById('wheel-canvas');
        const ctx = cvs.getContext('2d');
        const w=500, h=500, cx=250, cy=250, r=240;
        const len = db.wheel.length;
        const arc = Math.PI*2/len;
        const colors = ['#8a0000', '#1a1a1a', '#b8860b'];

        ctx.clearRect(0,0,w,h);
        for(let i=0; i<len; i++) {
            const ang = i*arc;
            ctx.beginPath(); ctx.moveTo(cx,cy); ctx.arc(cx,cy,r,ang,ang+arc);
            ctx.fillStyle = colors[i%3]; ctx.fill(); ctx.stroke();
            ctx.save(); ctx.translate(cx,cy); ctx.rotate(ang + arc/2);
            ctx.textAlign="right"; ctx.fillStyle="#fff"; ctx.font="bold 18px sans-serif";
            let t = db.wheel[i];
            let m = t.match(/ã€(.*?)ã€‘/);
            t = m ? m[1] : (t.length>8 ? t.substring(0,8)+"..." : t);
            ctx.fillText(t, r-20, 5); ctx.restore();
        }
    }

    function spinWheel() {
        const canvas = document.getElementById('wheel-canvas');
        document.getElementById('btn-spin').disabled=true;
        
        const len = db.wheel.length;
        const idx = Math.floor(Math.random() * len); // Winning index
        const sliceDeg = 360 / len;
        
        // æ—‹è½‰ç›®æ¨™è¨ˆç®—ï¼š
        // æˆ‘å€‘å¸Œæœ›æŒ‡é‡ï¼ˆé ‚éƒ¨ -90degï¼‰æŒ‡å‘ç‰¹å®šçš„ slice ä¸­å¿ƒã€‚
        // æ¯å€‹ slice i çš„ç¯„åœæ˜¯ [i*sliceDeg, (i+1)*sliceDeg]
        // å®ƒçš„ä¸­å¿ƒæ˜¯ i*sliceDeg + sliceDeg/2
        // ç›®å‰æŒ‡é‡åœ¨æ­£ä¸Šæ–¹ 270deg (æˆ– -90deg)
        // ç›®æ¨™è§’åº¦ = 360 * åœˆæ•¸ + (270 - sliceä¸­å¿ƒ)
        
        const extraSpins = 5; 
        const centerAngle = idx * sliceDeg + sliceDeg / 2;
        const targetRotation = (360 * extraSpins) + (270 - centerAngle);
        
        // ç‚ºäº†è®“è½‰å‹•é€£çºŒï¼ŒåŠ ä¸Šç›®å‰çš„ç´¯ç©è§’åº¦
        // ä½†è¦ç¢ºä¿æ–°çš„ target æ¯”ç¾åœ¨å¤§å¾ˆå¤š
        const currentMod = wheelDeg % 360;
        wheelDeg += targetRotation; 

        canvas.style.transform = `rotate(${wheelDeg}deg)`;
        
        setTimeout(() => {
            document.getElementById('wheel-msg').innerText = "çµæœç¢ºèªï¼";
            document.getElementById('btn-close-wheel').classList.remove('hidden');
            
            // Show Popup
            const txt = db.wheel[idx];
            const m = txt.match(/ã€(.*?)ã€‘(.*)/);
            document.getElementById('popup-title').innerText = m ? m[1] : "æ‡²ç½°";
            document.getElementById('popup-desc').innerText = m ? m[2] : txt;
            document.getElementById('overlay-popup').style.display='flex';
        }, 4000);
    }

    // --- Excel ---
    function toggleSettings() { 
        const el = document.getElementById('overlay-settings');
        el.style.display = el.style.display==='flex'?'none':'flex';
    }
    function exportExcel() {
        const wb = XLSX.utils.book_new();
        const q = db.questions.map(i=>({åˆ†é¡:i.cat, é¡Œç›®:i.q, ç­”æ¡ˆ:i.a, åœ–ç‰‡:i.img}));
        const o = db.ops.map(i=>({æ¨™é¡Œ:i.title, æè¿°:i.desc, æ•¸å€¼:i.val}));
        const p = db.puns.map(i=>({æ¨™é¡Œ:i.title, æè¿°:i.desc, æ•¸å€¼:i.val}));
        const w = db.wheel.map(i=>({å…§å®¹:i}));
        const max = Math.max(db.roster.a.length, db.roster.b.length);
        let r = []; for(let i=0; i<max; i++) r.push({TeamA:db.roster.a[i]||"", TeamB:db.roster.b[i]||""});
        
        XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(q), "é¡Œç›®");
        XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(o), "æ©Ÿæœƒ");
        XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(p), "æ‡²ç½°");
        XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(w), "è¼ªç›¤");
        XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(r), "åå–®");
        XLSX.writeFile(wb, "å¤éŸ»å°æ±º_å®Œæ•´é¡Œåº«.xlsx");
    }
    function importExcel(inp) {
        const f = inp.files[0]; if(!f)return;
        const r = new FileReader();
        r.onload = e => {
            const d = new Uint8Array(e.target.result);
            const wb = XLSX.read(d, {type:'array'});
            if(wb.Sheets["é¡Œç›®"]) db.questions = XLSX.utils.sheet_to_json(wb.Sheets["é¡Œç›®"]).map(r=>({cat:r.åˆ†é¡, q:r.é¡Œç›®, a:r.ç­”æ¡ˆ, img:r.åœ–ç‰‡}));
            if(wb.Sheets["æ©Ÿæœƒ"]) db.ops = XLSX.utils.sheet_to_json(wb.Sheets["æ©Ÿæœƒ"]).map(r=>({title:r.æ¨™é¡Œ, desc:r.æè¿°, val:parseInt(r.æ•¸å€¼)||0}));
            if(wb.Sheets["æ‡²ç½°"]) db.puns = XLSX.utils.sheet_to_json(wb.Sheets["æ‡²ç½°"]).map(r=>({title:r.æ¨™é¡Œ, desc:r.æè¿°, val:parseInt(r.æ•¸å€¼)||0}));
            if(wb.Sheets["è¼ªç›¤"]) db.wheel = XLSX.utils.sheet_to_json(wb.Sheets["è¼ªç›¤"]).map(r=>r.å…§å®¹||r.æ‡²ç½°å…§å®¹||Object.values(r)[0]);
            if(wb.Sheets["åå–®"]) {
                const raw = XLSX.utils.sheet_to_json(wb.Sheets["åå–®"]);
                db.roster.a=[]; db.roster.b=[];
                raw.forEach(r=>{ if(r.TeamA) db.roster.a.push(r.TeamA); if(r.TeamB) db.roster.b.push(r.TeamB); });
            }
            alert("åŒ¯å…¥æˆåŠŸï¼"); toggleSettings(); init();
        };
        r.readAsArrayBuffer(f);
    }

    window.onload = init;
</script>
</body>
</html>
